{"version":3,"sources":["../../src/transactions/MultisigModificationTransaction.js"],"names":["require","flatbuffers","Buffers","MultisigModificationTransactionBuffer","CosignatoryModificationBuffer","MultisigModificationTransaction","Builder","fee","version","type","deadline","minRemovalDelta","minApprovalDelta","modifications","builder","modificationsArray","forEach","cosignatoryPublicKeyVector","createCosignatoryPublicKeyVector","hexToUint8","modification","cosignatoryPublicKey","startCosignatoryModificationBuffer","addType","addCosignatoryPublicKey","push","endCosignatoryModificationBuffer","signatureVector","createSignatureVector","Array","map","Number","prototype","valueOf","signerVector","createSignerVector","deadlineVector","createDeadlineVector","feeVector","createFeeVector","modificationsVector","createModificationsVector","startMultisigModificationTransactionBuffer","addSize","length","addSignature","addSigner","addVersion","addFee","addDeadline","addMinRemovalDelta","addMinApprovalDelta","addNumModifications","addModifications","codedMultisigAggregate","endMultisigModificationTransactionBuffer","finish","bytes","asUint8Array"],"mappings":"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","file":"MultisigModificationTransaction.js","sourcesContent":["/*\n * Copyright 2018 NEM\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport VerifiableTransaction from './VerifiableTransaction';\nimport MultisigModificationTransactionSchema from '../schema/MultisigModificationTransactionSchema';\nimport convert from '../coders/convert';\nimport MultisigModificationTransactionBufferPackage from '../buffers/MultisigModificationTransactionBuffer';\n\nconst { flatbuffers } = require('flatbuffers');\n\nconst {\n\tMultisigModificationTransactionBuffer,\n\tCosignatoryModificationBuffer\n} = MultisigModificationTransactionBufferPackage.Buffers;\n\n/**\n * @module transactions/MultisigModificationTransaction\n */\nexport default class MultisigModificationTransaction extends VerifiableTransaction {\n\tstatic get Builder() {\n\t\tclass Builder {\n\t\t\tconstructor() {\n\t\t\t\tthis.fee = [0, 0];\n\t\t\t\tthis.version = 36867;\n\t\t\t\tthis.type = 0x4155;\n\t\t\t}\n\n\t\t\taddFee(fee) {\n\t\t\t\tthis.fee = fee;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddVersion(version) {\n\t\t\t\tthis.version = version;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddType(type) {\n\t\t\t\tthis.type = type;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddDeadline(deadline) {\n\t\t\t\tthis.deadline = deadline;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddMinRemovalDelta(minRemovalDelta) {\n\t\t\t\tthis.minRemovalDelta = minRemovalDelta;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddMinApprovalDelta(minApprovalDelta) {\n\t\t\t\tthis.minApprovalDelta = minApprovalDelta;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\taddModifications(modifications) {\n\t\t\t\tthis.modifications = modifications;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tbuild() {\n\t\t\t\tconst builder = new flatbuffers.Builder(1);\n\n\t\t\t\t// Create modifications\n\t\t\t\tconst modificationsArray = [];\n\t\t\t\tthis.modifications.forEach(modification => {\n\t\t\t\t\tconst cosignatoryPublicKeyVector = CosignatoryModificationBuffer\n\t\t\t\t\t\t.createCosignatoryPublicKeyVector(builder, convert.hexToUint8(modification.cosignatoryPublicKey));\n\t\t\t\t\tCosignatoryModificationBuffer.startCosignatoryModificationBuffer(builder);\n\t\t\t\t\tCosignatoryModificationBuffer.addType(builder, modification.type);\n\t\t\t\t\tCosignatoryModificationBuffer.addCosignatoryPublicKey(builder, cosignatoryPublicKeyVector);\n\t\t\t\t\tmodificationsArray.push(CosignatoryModificationBuffer.endCosignatoryModificationBuffer(builder));\n\t\t\t\t});\n\n\t\t\t\t// Create vectors\n\t\t\t\tconst signatureVector = MultisigModificationTransactionBuffer\n\t\t\t\t\t.createSignatureVector(builder, Array(...Array(64)).map(Number.prototype.valueOf, 0));\n\t\t\t\tconst signerVector = MultisigModificationTransactionBuffer\n\t\t\t\t\t.createSignerVector(builder, Array(...Array(32)).map(Number.prototype.valueOf, 0));\n\t\t\t\tconst deadlineVector = MultisigModificationTransactionBuffer\n\t\t\t\t\t.createDeadlineVector(builder, this.deadline);\n\t\t\t\tconst feeVector = MultisigModificationTransactionBuffer\n\t\t\t\t\t.createFeeVector(builder, this.fee);\n\t\t\t\tconst modificationsVector = MultisigModificationTransactionBuffer\n\t\t\t\t\t.createModificationsVector(builder, modificationsArray);\n\n\t\t\t\tMultisigModificationTransactionBuffer.startMultisigModificationTransactionBuffer(builder);\n\t\t\t\tMultisigModificationTransactionBuffer.addSize(builder, 123 + (33 * this.modifications.length));\n\t\t\t\tMultisigModificationTransactionBuffer.addSignature(builder, signatureVector);\n\t\t\t\tMultisigModificationTransactionBuffer.addSigner(builder, signerVector);\n\t\t\t\tMultisigModificationTransactionBuffer.addVersion(builder, this.version);\n\t\t\t\tMultisigModificationTransactionBuffer.addType(builder, this.type);\n\t\t\t\tMultisigModificationTransactionBuffer.addFee(builder, feeVector);\n\t\t\t\tMultisigModificationTransactionBuffer.addDeadline(builder, deadlineVector);\n\t\t\t\tMultisigModificationTransactionBuffer.addMinRemovalDelta(builder, this.minRemovalDelta);\n\t\t\t\tMultisigModificationTransactionBuffer.addMinApprovalDelta(builder, this.minApprovalDelta);\n\t\t\t\tMultisigModificationTransactionBuffer.addNumModifications(builder, this.modifications.length);\n\t\t\t\tMultisigModificationTransactionBuffer.addModifications(builder, modificationsVector);\n\n\n\t\t\t\t// Calculate size\n\t\t\t\tconst codedMultisigAggregate = MultisigModificationTransactionBuffer\n\t\t\t\t\t.endMultisigModificationTransactionBuffer(builder);\n\t\t\t\tbuilder.finish(codedMultisigAggregate);\n\n\t\t\t\tconst bytes = builder.asUint8Array();\n\t\t\t\treturn new MultisigModificationTransaction(bytes, MultisigModificationTransactionSchema);\n\t\t\t}\n\t\t}\n\n\t\treturn Builder;\n\t}\n}\n"]}